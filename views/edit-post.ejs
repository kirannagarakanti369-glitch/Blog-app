<%- include('partials/header', { title: 'Edit: ' + post.title }) %>

<div class="container">
    <div class="single-post">
        <h1 class="single-post-title">Edit Post</h1>
        
        <form action="/posts/<%= post.id %>?_method=PUT" method="POST" enctype="multipart/form-data">
            <div class="form-group">
                <label for="title">Post Title</label>
                <input type="text" id="title" name="title" class="form-control" value="<%= post.title %>" required>
            </div>
            
            <div class="form-group">
                <label for="image">Featured Image (Optional)</label>
                <% if (post.image_url) { %>
                    <div style="margin-bottom: 1rem;">
                        <p>Current Image:</p>
                        <img src="<%= post.image_url %>" alt="Current featured image" style="max-width: 200px; border-radius: 8px;">
                        <input type="hidden" name="existingImage" value="<%= post.image_url %>">
                    </div>
                <% } %>
                <input type="file" id="image" name="image" class="form-control" accept="image/*">
                <small>Upload a new image to replace the current one</small>
            </div>
            
            <div class="form-group">
                <label for="content">Post Content</label>
                <textarea id="content" name="content" class="form-control" required><%= post.content %></textarea>
            </div>
            
            <div class="post-actions">
                <button type="submit" class="btn">Update Post</button>
                <a href="/posts/<%= post.id %>" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
</div>

<%- include('partials/footer') %>