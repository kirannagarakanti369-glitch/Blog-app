<%- include('partials/header', { title: post.title }) %>

<div class="container">
    <div class="main-content" style="grid-template-columns: 1fr;">
        <article class="single-post">
            <h1 class="single-post-title"><%= post.title %></h1>
            
            <div class="single-post-meta">
                <span>By <strong class="author-name"><%= post.author_username || 'Unknown' %></strong></span>
                <span>‚Ä¢</span>
                <span>Posted on <%= new Date(post.created_at).toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                }) %></span>
                <% if (post.updated_at !== post.created_at) { %>
                    <span>‚Ä¢</span>
                    <span>Updated on <%= new Date(post.updated_at).toLocaleDateString('en-US', { 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric' 
                    }) %></span>
                <% } %>
                <span>‚Ä¢</span>
                <span><%= Math.ceil(post.content.length / 200) %> min read</span>
            </div>
            
            <% if (post.image_url) { %>
                <img src="<%= post.image_url %>" alt="<%= post.title %>" class="single-post-image">
            <% } %>
            
            <div class="post-content">
                <%= post.content.replace(/\n/g, '<br>') %>
            </div>
            
            <div class="post-actions">
                <a href="/" class="btn btn-secondary">‚Üê Back to Home</a>
                
                <% if (isAuthor) { %>
                    <a href="/posts/<%= post.id %>/edit" class="btn btn-primary">Edit Post</a>
                    <form action="/posts/<%= post.id %>?_method=DELETE" method="POST" style="display: inline;">
                        <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this post?')">Delete Post</button>
                    </form>
                <% } %>
                
                <% if (currentUser && !isAuthor) { %>
                    <button class="btn btn-secondary" onclick="alert('Like functionality coming soon!')">‚ù§Ô∏è Like</button>
                    <button class="btn btn-secondary" onclick="alert('Comment functionality coming soon!')">üí¨ Comment</button>
                <% } %>
            </div>
        </article>
    </div>
</div>

<%- include('partials/footer') %>